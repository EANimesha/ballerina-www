
    <div class="row cBallerina-io-Gray-row">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-Home-Left-col">
                        <div class="cBlallerina-io-docs-left-nav-container">
                            <div class="cSideBar-Button"><img src="/img/sidebar.svg" /></div>
                            <div class="cBlallerina-io-docs-left-nav-box">
                                <div class="cBallerina-io-docs-Title">TABLE OF CONTENTS</div>
                                <ul id="toc_list">
    
                                    
                                    <li class="toctree-l3"><a href="#how-to-structure-ballerina-code">How to Structure Ballerina Code</a></li>
                                    
                                    <li><a class="toctree-l4" href="#overview">Overview</a></li>
                                    
                                    <li><a class="toctree-l4" href="#programs">Programs</a></li>
                                    
                                    <li><a class="toctree-l4" href="#modules">Modules</a></li>
                                    
                                    <li><a class="toctree-l4" href="#projects">Projects</a></li>
                                    
                                    <li><a class="toctree-l4" href="#module-caches">Module Caches</a></li>
                                    
                                    <li><a class="toctree-l4" href="#module-repository-ballerina-central">Module Repository - Ballerina Central</a></li>
                                     
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 cBallerina-io-Home-Middle-col">
                        <div class="col-md-12 col-lg-12 cBallerina-io-breadcrumbs">
                            <div role="navigation" aria-label="breadcrumbs navigation">
      <ul class="wy-breadcrumbs" id="breadcrumb-list">
        <li><a href="/">Home</a> &raquo;</li>
        
          
            
              <li link_candidate="Learn"><a href="#" >Learn</a> &raquo;</li>
            
          
        
        <li>How to structure ballerina code</li>
        <li class="wy-breadcrumbs-aside" id="iGitEdit">
          
            <a href="https://github.com/ballerina-platform/ballerina-www/tree/1.0 rc1/website/two-column-pages/docs/learn/how-to-structure-ballerina-code.md" target="_blank"
              class="icon icon-github"> Edit on GitHub</a>
          
        </li>
      </ul>
    
    </div>
                        </div>
                        <div class="cBlallerina-io-docs-content-container">
                            <div class="wy-nav-content">
                                <div class="rst-content">
    
                                    <div role="main">
                                        <div class="section">
                                            <!--                <h1>How to structure ballerina code</h1>-->
                                             <h1 id="how-to-structure-ballerina-code">How to Structure Ballerina Code</h1>
    <p>This document demonstrates the development of a Ballerina project and shows how to use the <code>Ballerina Tool</code> to fetch, 
    build, and install Ballerina modules. These commands work with repositories that are both local and remote.</p>
    <p>Ballerina Central is a globally hosted module management system that is used to discover, download, and publish modules.</p>
    <p>The <code>Ballerina Tool</code> requires you to organize your code in a specific way. This document explains the simplest way to 
    get it up and running with a Ballerina installation.</p>
    <h2 id="overview">Overview</h2>
    <ul>
    <li>Ballerina progammers can either place their code into a single source code file or in a <em>project</em> directory.</li>
    <li>A Ballerina program residing in a single source code file should have a <code>.bal</code> extension and an entry point (i.e., either a main 
      method or a service).</li>
    <li>A Ballerina <em>program</em> is a compiled and linked binary.</li>
    <li>A <em>module</em> is a directory that contains Ballerina source code files.</li>
    <li>A <em>repository</em> is a versioned collection of compiled or source code <em>modules</em>.</li>
    <li>A <em>project</em> atomically manages a collection of <em>modules</em>.</li>
    </ul>
    <h2 id="programs">Programs</h2>
    <p>A <em>program</em> is a runtime executable ending with a <code>.jar</code> extension. A <em>program</em> is the transitive closure of one 
    Ballerina module without including <code>ballerina/*</code> modules, since those are dynamically linked within Ballerina's runtime 
    engine during execution. A <em>module</em>, which is a <em>program</em> compiles into a file with a <code>.jar</code> extension. Otherwise, it is 
    treated as a to-be-linked library that ends with a <code>.balo</code> extension.</p>
    <p>To generate an executable <code>.jar</code> file, the program's module must contain either a <code>main()</code> function (a process entry point) or 
    a <code>service</code> (a network-accessible API).</p>
    <p>A program can import dependent <em>modules</em> that are stored within a <em>repository</em>.</p>
    <p>Suppose you have the following structure:</p>
    <pre><code>/local/ballerina/src
      sample.bal
    </code></pre>
    
    <p>The <code>sample.bal</code> file contains both a <code>main()</code> entry point and a <code>service</code>:</p>
    <pre><code class="ballerina">import ballerina/http;
    import ballerina/io;
    import ballerina/log;
    
    public function main() {
        io:println(&quot;Hello, World!&quot;);
    }
    
    service hello on new http:Listener(9090) {
        resource function sayHello (http:Caller caller, http:Request req) {
            http:Response res = new;
            res.setPayload(&quot;Hello, World!&quot;);
            var respondResult = caller-&gt;respond(res);
            if (respondResult is error) {
                log:printError(&quot;Error sending response&quot;, err = respondResult);
            }
        }
    }
    </code></pre>
    
    <h3 id="build-and-run-programs">Build and Run Programs</h3>
    <p>To generate an executable <code>.jar</code>, you can build a Ballerina program, which contains a <code>main()</code> function or a service(s):</p>
    <pre><code class="bash">$ cd /local/ballerina/src
    $ ballerina build sample.bal
    
    # This generates 'sample.jar'.
    </code></pre>
    
    <p>You can use the following command to run the <code>main()</code> function or services in a generated <code>.jar</code> file:</p>
    <pre><code class="bash">$ ballerina run sample.jar
    </code></pre>
    
    <h2 id="modules">Modules</h2>
    <p>A <em>module</em> is a directory, which contains Ballerina source code files and is part of a namespace. Modules facilitate 
    collaboration, sharing, and reuse. Modules can include functions, clients, constants, annotations, services, and 
    objects. To share a module among programs, projects, and users, you need to push the module into a repository.</p>
    <p>Modules:</p>
    <ol>
    <li>May or may not have a version</li>
    <li>However, modules cannot be pushed into a registry for sharing without a version</li>
    <li>Are referenced by  <code>&lt;org-name&gt;/&lt;module-name&gt;</code> where <code>&lt;org-name&gt;</code> is a namespace from within a repository.</li>
    </ol>
    
    <p>Module names can contain alphanumeric characters including dots (<code>.</code>). Dots in a module name has no meaning other
    than the last segment after the final dot being used as a default alias within your source code.</p>
    <h3 id="importing-modules">Importing Modules</h3>
    <p>Your Ballerina source files can import modules:</p>
    <pre><code class="ballerina">import [&lt;org-name&gt;]/&lt;module-name&gt; [as &lt;identifier&gt;];
    </code></pre>
    
    <p>When you import a module, you can use its functions, annotations, and other objects in your code. You can also 
    reference the objects with a qualified identifier followed by a colon (<code>:</code>). For example, <code>&lt;identifier&gt;:&lt;module-object&gt;</code>.</p>
    <p>Identifiers are either derived or explicit. The default identifier is either the module name or if the module 
    name has dots (<code>.</code>) included, then the last word after the last dot. For example, <code>import ballerina/http;</code> will
    have <code>http:</code>as the derived identifer and the module <code>import ballerinax/java.jdbc</code> would have <code>jdbc:</code> as the 
    default identifier.</p>
    <p>You can have an explicit identifier by using the <code>as &lt;identifier&gt;</code> syntax.</p>
    <pre><code class="ballerina">import ballerina/http;
    
    // The listener comes from the imported module.
    service hello on new http:Listener(9090) {
    
        // The 'Request' object comes from the imported module.
        resource function sayHello (http:Caller caller, http:Request req) {
            ...
        }
    }
    </code></pre>
    
    <p>Or you can override the default identifier:</p>
    <pre><code class="ballerina">import ballerina/http as network;
    
    service hello on new network:Listener(9090) {
    
        // The 'Request' object comes from the imported module.
        resource function sayHello (network:Caller caller, network:Request req) {
            ...
        }
    }
    </code></pre>
    
    <h3 id="module-version-dependency">Module Version Dependency</h3>
    <p>If your source file or module is a part of a project, then you can explicitly manage version dependencies of imported 
    modules within the project by defining it in the <code>Ballerina.toml</code> file:</p>
    <pre><code class="toml">[dependencies]
    &quot;wso2/twitter&quot; = &quot;2.3.4&quot;
    &quot;wso2/github&quot; = { path = &quot;path/to/github.balo&quot;, version = &quot;1.2.3&quot;}
    </code></pre>
    
    <p>Often, you would want to depend on a module of another project, which you have not pushed to the Ballerina Central. This can be 
    achieved using a path dependency as shown above with the <code>wso2/github</code> dependency.</p>
    <p>If an import version is not specified in <code>Ballerina.toml</code>, the compiler will use the latest module version from a 
    repository, if one exists.</p>
    <pre><code class="ballerina">import foo/http;
    
    public function main() {
      http:Person x = http:getPerson();
    }
    </code></pre>
    
    <h3 id="compiled-modules">Compiled Modules</h3>
    <p>A compiled module is the compiled representation of a single module of Ballerina code, which includes transitive 
    dependencies into the compiled unit.</p>
    <p>Modules can only be created, versioned, and pushed into a repository as part of a <em>project</em>.</p>
    <h3 id="running-compiled-modules">Running Compiled Modules</h3>
    <p>An entrypoint such as a <code>main()</code> or a <code>service</code> that is compiled as part of a named module is automatically linked 
    into a <code>.jar</code>. You can run the compiled module <code>.jar</code>:</p>
    <pre><code class="bash">ballerina run module.jar
    </code></pre>
    
    <h2 id="projects">Projects</h2>
    <ul>
    <li>A <em>project</em> is a directory, which atomically manages a collection of <em>modules</em>. It has:</li>
    <li>A user-managed manifest file, <code>Ballerina.toml</code></li>
    <li>An <code>src</code> folder with module source code</li>
    </ul>
    <p>Projects are managed atomically. Therefore, dependency management, compilation, unit tests, and artifact generation are done 
    collectively across the source code files and modules defined within a project.</p>
    <h3 id="create-a-project">Create a Project</h3>
    <p>You can create a project using the <code>ballerina new</code> command:</p>
    <pre><code class="bash">ballerina new &lt;project-name&gt;
    </code></pre>
    
    <p>The <code>new</code> command will create a project directory with the given name. A Ballerina project cannot reside in another 
    ballerina project. If you run <code>ballerina new</code> from inside a Ballerina project directory or from inside a sub directory of a Ballerina project,
    it will give an error.</p>
    <p>It will create the <code>Ballerina.toml</code> file, and <code>src</code> folder.</p>
    <h3 id="add-a-module">Add a Module</h3>
    <p>Once the project is initialized, a module can be created inside the project using the <code>ballerina add</code> command. 
    Each subdirectory of the project <code>src</code> folder defines a single module. The subdirectory's name will be used to name the 
    module. </p>
    <pre><code class="bash">ballerina add &lt;module-name&gt;
    </code></pre>
    
    <p>The folders <code>tests/</code> and <code>resources/</code> are reserved folder names within the module. The <code>tests/</code> folder contains 
    unit test files of the module and the <code>resources/</code> folder contains the resources of the module that will be available at runtime. Any 
    additional subdirectories within the module have no semantic meaning and can be used by the developer for organizing 
    files. The module subdirectories can have as many Ballerina source files and all will be included within the 
    module when it is built. </p>
    <h3 id="project-structure">Project Structure</h3>
    <pre><code>/
        project-name/
            .gitignore
            Balleirna.lock             # Generated during the build and used to rebuild identical binary
            Ballerina.toml             # Configuration, which  defines project intent
    
            src/
                module1/               # The source in this directory will be named “&lt;org-name&gt;/module1”
                    Module.md          # Contains descriptive metadata for display at Ballerina Central
                    main.bal           # Contains the default main method
                    *.bal              # In this dir and recursively in subdirs except tests/ and resources/
                    [tests/]           # Module-specific unit and integration tests
                        main_test.bal  # The test file for main
                        [resources]    # Resources for the tests
                    [resources/]       # Module-specific resources  
    
                module2/
                    Module.md
                    *.bal
                    [tests/]
                    [resources/]   
    
            target/                    # Compiled executables and other artifacts end up here
                balo/                  # BALO files, one per each module, will be created here
                bin/                   # Executables will be created here
                caches/
                    bir_cache/
                    jar_cache/
    </code></pre>
    
    <h3 id="build-a-project">Build a Project</h3>
    <p>A project should be built if it is required to generate the executable JAR files from the modules in the project. The
    executable JAR files will be generated only if there are entry points (main method or a service) in the module. Building
    a project will build all modules found in the project's root folder. Building a project runs through phases including
    dependency resolution, compilation, artifact generation, and unit test execution.</p>
    <pre><code class="bash">ballerina build
    </code></pre>
    
    <h3 id="build-a-module">Build a Module</h3>
    <p>You can build a single module contained within a project:</p>
    <pre><code class="bash">ballerina build &lt;module-name&gt;
    </code></pre>
    
    <p>Use the <code>--skip-tests</code> flag with the <code>ballerina build</code> command to skip running the tests during the build process.</p>
    <pre><code class="bash">ballerina build --skip-tests
    </code></pre>
    
    <h3 id="compile-a-project">Compile a Project</h3>
    <p>A project should be compiled if it is required to generate the libraries (i.e., BALOs) from the modules in the project.
    Compiling a project will compile all the modules found in the project's root folder. Building a project runs through phases
    including dependency resolution, compilation, artifact generation, and unit test execution.</p>
    <pre><code class="bash">ballerina compile
    </code></pre>
    
    <h3 id="compile-a-module">Compile a Module</h3>
    <p>You can build a single module contained within a project:</p>
    <pre><code class="bash">ballerina compile &lt;module-name&gt;
    </code></pre>
    
    <p>Use the <code>--skip-tests</code> flag with the <code>ballerina compile</code> command to skip running the tests during the compile process.</p>
    <pre><code class="bash">ballerina compile --skip-tests
    </code></pre>
    
    <h3 id="version-a-module">Version a Module</h3>
    <p>Modules in a project are assigned their version from within the <code>Ballerina.toml</code> file:</p>
    <pre><code class="toml"># The current version, obeying [semver](https://semver.org/)
    version = &quot;string&quot;
    </code></pre>
    
    <p>All modules built in a project are assigned the same version. If you need two modules to have different versions, then 
    those modules should be placed into different projects.</p>
    <p>Version labels must follow <a href="https://semver.org/">Semantic Versioning 2.0 rules</a>.</p>
    <h3 id="assign-an-organization-name-to-a-module">Assign an Organization Name to a Module</h3>
    <p>A module is assigned an <code>&lt;org-name&gt;</code> when it is pushed into a repository. The <code>&lt;org-name&gt;</code> is defined in the 
    <code>Ballerina.toml</code> and all modules in the same project are assigned the same organization name:</p>
    <pre><code class="toml"># Org name assigned to modules when installed into a repository
    org-name = &quot;foo&quot;
    </code></pre>
    
    <h2 id="module-caches">Module Caches</h2>
    <h3 id="caches">Caches</h3>
    <p>Ballerina will maintain several caches to speed up the compile and build process. Following artifacts will be cached by 
    Ballerina.</p>
    <ul>
    <li>BALO files fetched from Central.</li>
    <li>BIR files generated during the compilation.</li>
    <li>JAR file generated during the compilation</li>
    </ul>
    <p>Here, the BALO cache will be common across any version of Ballerina and the BIR and JAR caches will be specific to the Ballerina version.  </p>
    <h4 id="balo-cache">BALO Cache</h4>
    <p>BALO cache is responsible for keeping BALOs of dependent modules. There is a BALO cache inside the Ballerina 
    distribution, which contains the BALOs of libraries that will get packed into the distribution. There is another cache 
    at the user's home repository, which is used to cache the BALOs fetched from Central. </p>
    <h4 id="bir-cache">BIR Cache</h4>
    <p>BIR files of the standard library that gets packed into a distribution are generated during the distribution build time. 
    The BIR files of the other dependencies will be kept inside the target directory when compiling a Ballerina project. </p>
    <h4 id="jar-cache">JAR Cache</h4>
    <p>The JAR files generated during the build will be kept inside the target directory when building a Ballerina project. The
    JAR file will be generated only if there is an entry point (main funtion or service) within the module.</p>
    <h2 id="module-repository-ballerina-central">Module Repository - Ballerina Central</h2>
    <p>A repository is a collection of compiled Ballerina modules. A repository helps to organize modules used by multiple 
    programs by managing their versions and assets in a central location. [Ballerina Central]
    (http://central.ballerina.io) is the only module repository for Ballerina developers.</p>
    <h3 id="organizations">Organizations</h3>
    <p>An organization is a logical name used for grouping modules together under a common namespace within a repository.</p>
    <p>All modules installed into a repository must have an organization name. Any installation or pushing of a module into a 
    repository will fail without an organization name.</p>
    <p>Organization names can contain lowercase alphanumeric characters and underscores. None of the characters in an 
    organization name have any semantic meaning.</p>
    <p>The organization names <code>ballerina</code> and <code>ballerinax</code> are reserved for system use. Modules in <code>ballerina</code> and 
    <code>ballerinax</code> are included within the system distribution.</p>
    <p>At Ballerina Central, every account is assigned a personal organization name, which is chosen by a 
    user when creating their account initially or is derived from the email address of the user.</p>
    <p>When pushing a module from a local computer into Ballerina Central, the user's organization name in the Ballerina 
    Central MUST match the <code>&lt;org-name&gt;</code> assigned in the <code>Ballerina.toml</code> file. If the names do not match, then the push operation 
    will fail. This enforcement may seem arbitrary. However, it is a simple way to ensure organization naming consistency 
    across remote and local development environments.</p>
    <h3 id="pulling-remote-modules">Pulling Remote Modules</h3>
    <p>You can install modules that exist in Ballerina Central into your BALO cache in the home directory via "pulling" them. 
    Pulling a module discovers and downloads the module source and binaries from Ballerina Central and installs them into the 
    BALO cache. </p>
    <pre><code class="bash">ballerina pull &lt;org-name&gt;/&lt;module-name&gt;[:&lt;version&gt;]
    </code></pre>
    
    <p>If a version is not specified for the module to be pulled, the latest version of the module will be pulled from the 
    Ballerina Central. Projects that perform dependency analysis will automatically pull modules into the BALO cache in the home
    directory.</p>
    <h3 id="pushing-modules">Pushing Modules</h3>
    <p>"Pushing" a module uploads the associated module files and installs the module into Ballerina Central.</p>
    <p>The org-name and the version of the module will be read from the manifest file <code>Ballerina.toml</code> inside the project.
    It is required to build the module before pushing it to Ballerina Central.</p>
    <pre><code># Push a single module
    ballerina push &lt;module-name&gt;
    </code></pre>
    
    <h3 id="configure-ballerina-central-access">Configure Ballerina Central Access</h3>
    <p>Ballerina Central requires an account in order to push modules. Your account is represented by a CLI token that is 
    installed into your local Ballerina configuration file, i.e., <code>~/.ballerina/Settings.toml</code>. The CLI token is 
    automatically installed into this file the first time you perform a <code>ballerina push</code> as Ballerina redirects to an 
    OAuth authorization screen, configures your account, and then copies your CLI token from Ballerina Central into your 
    local CLI configuration. To get your token, register on Ballerina Central and visit the 
    <a href="https://central.ballerina.io/dashboard">Ballerina Central Dashboard</a>.</p>
    <p>Every push of the same module into Ballerina Central REQUIRES a new version even for minor text updates. 
    This policy is enforced to ensure that projects, which make use of dependencies cannot experience accidental behavior drift across 
    two versions of the same module given the same version. Essentially, there is no way to "update" a module for a specific 
    version in Ballerina Central.</p> 
                                        </div>
                                    </div>
    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>